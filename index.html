<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.4.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="安₃">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="安₃">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="安₃">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>安₃</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	<!--github start-->
	<a href="https://github.com/awcnoanswer" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	<!--github end-->
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">安₃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/28/xd-会话/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/xd-会话/" itemprop="url">
                  xd-会话
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-28 01:30:11 / 修改时间：16:10:15" itemprop="dateCreated datePublished" datetime="2018-12-28T01:30:11+08:00">2018-12-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h1><h2 id="一次会话"><a href="#一次会话" class="headerlink" title="一次会话"></a>一次会话</h2><ul>
<li>浏览器第一次给服务器发送请求，会话建立，直到有一方断开为止。</li>
<li>包含多次请求和响应</li>
</ul>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>在一次会话范围共享数据</li>
</ul>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ul>
<li><code>Cookie</code></li>
<li><code>Session</code> </li>
</ul>
<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>客户端技术<ul>
<li>Cookie是由客户端保存和携带的。</li>
<li>只能存储字符串</li>
</ul>
</li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul>
<li>基于响应头<code>set-cookie</code>和请求头<code>cookie</code>实现</li>
<li>程序把每个用户的数据以cookie形式响应给用户各自的浏览器，存在本地。当用户再次请求访问服务器的web资源时，就会带着各自的(cookie)去。如此，web资源处理的就是用户各自的数据。</li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ol>
<li>创建Cookie(在服务端)<ul>
<li><code>Cookie cookie=new Cookie(String name,String value,[String path])</code><ul>
<li><code>path</code><ul>
<li>默认是创建cookie的应用的虚拟目录。</li>
<li>可以指定<ol>
<li>构造时指定path</li>
<li><code>cookie.setPath()</code></li>
</ol>
</li>
<li>只有以cookie的path开头的访问路径才会携带cookie。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>响应Cookie到客户端<ul>
<li><code>response.addCookie(Cookie c)</code><ul>
<li>响应头<code>set-Cookie</code></li>
</ul>
</li>
</ul>
</li>
<li>再次请求时获取Cookie<ul>
<li><code>Cookie[] cs=request.getCookies()</code><ul>
<li>获取cookie列表。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h2><h3 id="一次可不可以发送多个Cookie"><a href="#一次可不可以发送多个Cookie" class="headerlink" title="一次可不可以发送多个Cookie"></a>一次可不可以发送多个Cookie</h3><ul>
<li>可以</li>
<li>创建多个Cookie对象，使用response调用多次<code>addCookie()</code>即可</li>
</ul>
<h3 id="Cookie的存活时间"><a href="#Cookie的存活时间" class="headerlink" title="Cookie的存活时间"></a>Cookie的存活时间</h3><ul>
<li><code>void setMaxAge(int time)</code><ul>
<li><code>time</code><ul>
<li>负数<ul>
<li>默认</li>
<li>默认cookie是会话级别的，即浏览器一关闭就会消失</li>
</ul>
</li>
<li>正数<ul>
<li>持久化存储，存活时间</li>
</ul>
</li>
<li>0<ul>
<li>删除Cookie</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Cookie能否存中文"><a href="#Cookie能否存中文" class="headerlink" title="Cookie能否存中文"></a>Cookie能否存中文</h3><ul>
<li>tomcat8之前<ul>
<li>不可以</li>
<li>需要将中文转码，一般采用URL编码(%16进制)</li>
</ul>
</li>
<li>tomcat8之后，Cookie支持中文<ul>
<li>但是不支持特殊字符，建议使用URL编解码<ul>
<li>URL编码后会变成<code>%E7</code>这种形式的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="URL编码"><a href="#URL编码" class="headerlink" title="URL编码"></a>URL编码</h4><ul>
<li><code>URLEncoder</code><ul>
<li><code>encode(String s, String character)</code><ul>
<li>编码</li>
</ul>
</li>
<li><code>decode(String s, String character)</code><ul>
<li>解码</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Cookie共享问题"><a href="#Cookie共享问题" class="headerlink" title="Cookie共享问题"></a>Cookie共享问题</h3><ol>
<li>同一个服务器下的多个we项目<ul>
<li>因为默认path是创建cookie的项目的虚拟目录，其它web项目是访问不到的。</li>
<li>即默认不能共享</li>
<li>共享<ul>
<li><code>setPath(&quot;/&quot;)</code></li>
</ul>
</li>
</ul>
</li>
<li>不同服务器间的共享<ul>
<li><code>setDomain(String path)</code><ul>
<li>如果设置一级域名相同，那么多个服务区间的Cookie可以共享</li>
<li><code>setDomain(&quot;.baidu.com&quot;)</code><ul>
<li>则<code>tieba.baidu.com</code>和<code>news.baidu.com</code>…之间就可以共享</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><ul>
<li>服务端技术，session依赖于cookie<ul>
<li>可以存储任意对象</li>
</ul>
</li>
<li>在一次会话的多次请求间共享数据，将数据保存在服务端的对象种</li>
</ul>
<h2 id="获取Session"><a href="#获取Session" class="headerlink" title="获取Session"></a>获取Session</h2><ul>
<li><code>HttpSession session = request.getSession()</code><ul>
<li>若session不存在则创建，存在则获取</li>
</ul>
</li>
</ul>
<h2 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h2><ul>
<li>第一次访问会创建session并分配<code>JSessionID</code></li>
<li>响应到客户端,并以cookie形式存储</li>
<li>以后访问会带着这个cookie<ul>
<li>若有此cookie则可以获取session</li>
<li>若无此cookie则视为第一次访问，循环…。</li>
</ul>
</li>
</ul>
<h2 id="HttpSession"><a href="#HttpSession" class="headerlink" title="HttpSession"></a>HttpSession</h2><ul>
<li><code>String getId()</code><ul>
<li>获取session的JSessionID</li>
</ul>
</li>
<li><code>setMaxInactiveInterval(int interval)</code><ul>
<li>设置session存活时间，默认30分</li>
</ul>
</li>
<li><code>invalidate()</code><ul>
<li>销毁session </li>
</ul>
</li>
</ul>
<h2 id="细节-1"><a href="#细节-1" class="headerlink" title="细节"></a>细节</h2><h3 id="客户端关闭，服务器不关闭，两次获取的session是否是同一个"><a href="#客户端关闭，服务器不关闭，两次获取的session是否是同一个" class="headerlink" title="客户端关闭，服务器不关闭，两次获取的session是否是同一个"></a>客户端关闭，服务器不关闭，两次获取的session是否是同一个</h3><ul>
<li>默认情况下，不是<ul>
<li>因为虽然session默认存活30分钟，但是session是以cookie的形式保存在客户端的，而cookie默认客户端已关闭就会消失。</li>
</ul>
</li>
<li>若想获取同一个<ul>
<li>可以创建Cookie，键为<code>JSessionID</code>，并设置存活时间</li>
</ul>
</li>
</ul>
<h3 id="客户端不关闭，服务器关闭，两次获取的session是否是同一个"><a href="#客户端不关闭，服务器关闭，两次获取的session是否是同一个" class="headerlink" title="客户端不关闭，服务器关闭，两次获取的session是否是同一个"></a>客户端不关闭，服务器关闭，两次获取的session是否是同一个</h3><ul>
<li>不是<ul>
<li>因为对象的地址值是有随机性的，服务器重启会重新创建。两次创建很难一样。</li>
</ul>
</li>
<li>对象虽然不是同一个，但需要保证数据不丢失<ul>
<li>使用<strong>Session的钝化和活化</strong></li>
<li>在服务器关闭时将session钝化，服务器再次开启时将session活化</li>
<li>注<ul>
<li>dos命令下，正常关闭tomcat，tomcat会自动钝化session，在<code>work</code>目录下生成<code>Session.ser</code>文件，再次启动，会活化。</li>
<li>idea中，idea使用虚拟目录方式部署应用，在idea中关闭tomcat时，也会钝化，但是再次启动时，idea会先删除<code>work</code>目录，钝化的文件被删除了，也就无法活化了。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Session的销毁"><a href="#Session的销毁" class="headerlink" title="Session的销毁"></a>Session的销毁</h3><ol>
<li>服务器关闭</li>
<li>调用<code>invalidate()</code></li>
<li>tomcat的<code>/conf/web.xml</code>中的默认配置<code>&lt;session-config&gt;</code><ul>
<li>默认是30分钟，可以自己修改</li>
</ul>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/28/xd-工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/xd-工具/" itemprop="url">
                  xd-工具
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-28 00:44:53 / 修改时间：00:51:00" itemprop="dateCreated datePublished" datetime="2018-12-28T00:44:53+08:00">2018-12-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="StringUtils"><a href="#StringUtils" class="headerlink" title="StringUtils"></a>StringUtils</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>在<code>commons-lang3.jar</code>中</li>
</ul>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ul>
<li><code>boolean isEmpty(String s)</code><ul>
<li>判断字符串是否为空，不会去除字符串空格。</li>
<li><code>String s=null</code><ul>
<li>true</li>
</ul>
</li>
<li><code>String s=&quot;&quot;</code><ul>
<li>true</li>
</ul>
</li>
<li><code>String s=&quot; &quot;</code> <ul>
<li>false</li>
</ul>
</li>
</ul>
</li>
<li><code>boolean isBlank(String s)</code><ul>
<li>判断字符串是否为空，会去除字符串空格。    </li>
<li><code>String s=null</code><ul>
<li>true</li>
</ul>
</li>
<li><code>String s=&quot;&quot;</code><ul>
<li>true</li>
</ul>
</li>
<li><code>String s=&quot; &quot;</code> <ul>
<li>true</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="DBUtils"><a href="#DBUtils" class="headerlink" title="DBUtils"></a>DBUtils</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><ul>
<li>java编程中的数据库操作实用工具，小巧简单实用</li>
<li>封装了对JDBC的操作，简化了JDBC操作<ul>
<li>对于数据表的读操作，它可以把结果转换成List，Array，Set等等</li>
<li>对于数据表的写操作，只需写sql语句</li>
<li>可以使用数据源，使用JNDI，数据库连接池等技术来优化性能–重用已经构建好的数据库连接对象</li>
</ul>
</li>
<li>一个工具类,定义了关闭资源与事务处理的方法</li>
</ul>
<h2 id="QueryRunner"><a href="#QueryRunner" class="headerlink" title="QueryRunner"></a>QueryRunner</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><ul>
<li>提供对sql语句操作的API.</li>
<li>构造和方法中<ul>
<li>有Connection参数可以自己控制事务</li>
<li>没有Connection参数自动事务</li>
</ul>
</li>
</ul>
<h3 id="构造"><a href="#构造" class="headerlink" title="构造"></a>构造</h3><ul>
<li><code>QueryRunner([boolean pmdKnownBroken])</code></li>
<li><code>QueryRunner(DataSource ds,[boolean pmdKnownBroken])</code><ul>
<li>true<ul>
<li>Oracle使用</li>
</ul>
</li>
<li>false或空参<ul>
<li>mysql    </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><ul>
<li><code>&lt;T&gt; T query(String sql,ResultSetHandler&lt;T&gt; rsh,[Object... params])</code><ul>
<li>查询select</li>
</ul>
</li>
<li><code>int update([Connection conn].String sql,[Object... params])</code><ul>
<li>增删改(insert delete update)</li>
<li>int 影响行数</li>
</ul>
</li>
<li><code>int[] batch([Connection conn],String sql,Object[][] params)</code><ul>
<li>批处理</li>
</ul>
</li>
</ul>
<h4 id="ResultSetHandler"><a href="#ResultSetHandler" class="headerlink" title="ResultSetHandler"></a>ResultSetHandler</h4><h5 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h5><ul>
<li>用于定义select操作后，怎样封装结果集</li>
</ul>
<h5 id="结果处理器"><a href="#结果处理器" class="headerlink" title="结果处理器"></a>结果处理器</h5><ul>
<li><code>ArrayHandler</code><ul>
<li>适合取1条记录。把该条记录的每列值封装到一个数组中Object[]</li>
<li><code>Object[]</code></li>
</ul>
</li>
<li><code>ArrayListHandler</code><ul>
<li>适合取多条记录。把每条记录的每列值封装到一个数组中Object[]，把数组封装到一个List中</li>
<li><code>List&lt;Object[]&gt;</code></li>
</ul>
</li>
<li><code>ColumnListHandler</code><ul>
<li>取某一列的数据(sql语句中的某一列)。封装到List中</li>
<li><code>List&lt;Object&gt;</code></li>
</ul>
</li>
<li><code>KeyedHandler</code><ul>
<li>取多条记录，每一条记录封装到一个Map中，再把这个Map封装到另外一个Map中，key为指定的字段值。</li>
<li><code>Map&lt;自定义key,Map&lt;列名,列值&gt;&gt;</code></li>
</ul>
</li>
<li><code>MapHandler</code><ul>
<li>适合取1条记录。把当前记录的列名和列值放到一个Map中</li>
<li><code>Map&lt;列名,列值&gt;</code></li>
</ul>
</li>
<li><code>MapListHandler</code><ul>
<li>适合取多条记录。把每条记录封装到一个Map中，再把Map封装到List中</li>
<li><code>List&lt;Map&lt;列名,列值&gt;&gt;</code></li>
</ul>
</li>
<li><code>ScalarHandler</code><ul>
<li>适合取单行单列数据</li>
<li>如取<code>count(*)</code></li>
<li><code>Object</code></li>
</ul>
</li>
<li><code>BeanHandler</code><ul>
<li>取一个对象</li>
<li><code>Object</code></li>
</ul>
</li>
<li><code>BeanListHandler</code><ul>
<li><code>取对象的集合</code></li>
<li><code>List&lt;Object&gt;</code></li>
</ul>
</li>
</ul>
<h1 id="JDBCTemplate"><a href="#JDBCTemplate" class="headerlink" title="JDBCTemplate"></a>JDBCTemplate</h1><h2 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h2><ul>
<li>spring 提供用于操作JDBC工具类，类似DBUtils</li>
<li>依赖 连接池DataSource （数据源）</li>
</ul>
<h2 id="方法-2"><a href="#方法-2" class="headerlink" title="方法"></a>方法</h2><ul>
<li><code>update(String sql, Object... obj)</code><ul>
<li>执行DML语句 （增删改）</li>
</ul>
</li>
<li><code>queryForMap(String sql, Object... obj)</code><ul>
<li>查询的结果集封装为map集合</li>
<li>此方法查询结果集长度只能是1<ul>
<li>列名为key，列值为value</li>
</ul>
</li>
</ul>
</li>
<li><code>queryForList(String sql, Object... obj)</code><ul>
<li>将每一条记录封装为map集合，然后将map集合封装到list集合中</li>
<li><code>List&lt;Map&lt;String, Object&gt;&gt;</code></li>
</ul>
</li>
<li><code>query(String sql, RowMapper&lt;Object obj&gt; rowMapper, Object... obj)</code><ul>
<li>查询结果封装为javabean对象，然后封装到list集合</li>
<li><code>List&lt;Object obj&gt;</code></li>
</ul>
</li>
<li><code>queryForObject(String sql, Class&lt;? extends Object&gt; type, Object... obj)</code><ul>
<li>查询结果封装为对象（通常是基本数据类型包装类）</li>
<li>一般用于聚合函数的查询</li>
</ul>
</li>
</ul>
<h3 id="RowMapper"><a href="#RowMapper" class="headerlink" title="RowMapper"></a>RowMapper</h3><ul>
<li>类似于DBUtils的ResultSetHandler</li>
<li>可以自己实现，也可使用提供的</li>
</ul>
<h4 id="BeanPropertyRowMapper"><a href="#BeanPropertyRowMapper" class="headerlink" title="BeanPropertyRowMapper"></a>BeanPropertyRowMapper</h4><ul>
<li>将结果集封装为对象，然后存在list中</li>
</ul>
<h1 id="内省-Introspector"><a href="#内省-Introspector" class="headerlink" title="内省(Introspector)"></a>内省(Introspector)</h1><h2 id="Introspector"><a href="#Introspector" class="headerlink" title="Introspector"></a>Introspector</h2><ul>
<li>Introspector根据<code>JavaBean.class</code>构建一个BeanInfo对象。</li>
<li>BeanInfo封装了一个类的所有属性</li>
<li>由BeanInfo获取属性描述器<code>PropertyDescriptor</code><ul>
<li><code>Method getReadMethod()</code><ul>
<li>对应get</li>
</ul>
</li>
<li><code>Method getWriteMethod()</code><ul>
<li>对应set</li>
</ul>
</li>
</ul>
</li>
<li>开发框架时，经常使用java对象的属性来封装程序的数据，每次都使用反射来完成此类操作过于麻烦。</li>
</ul>
<h2 id="java-beans"><a href="#java-beans" class="headerlink" title="java.beans"></a>java.beans</h2><ul>
<li>sun公司开发的一套api专门用于操作java对象的属性。</li>
<li>上述操作太过繁琐，Apache组织开发了一套api以简化编写</li>
</ul>
<h2 id="Beanutils"><a href="#Beanutils" class="headerlink" title="Beanutils"></a>Beanutils</h2><h3 id="BeanUtils"><a href="#BeanUtils" class="headerlink" title="BeanUtils"></a>BeanUtils</h3><ul>
<li><code>void setProperty(Object bean,String filedName,Object value)</code></li>
<li><code>String getProperty(Object bean,String filedName)</code></li>
<li><code>void populate(Object bean,Map map)</code><ul>
<li>map中存字段名和值的键值对。</li>
</ul>
</li>
</ul>
<h3 id="PropertyUtils"><a href="#PropertyUtils" class="headerlink" title="PropertyUtils"></a>PropertyUtils</h3><h3 id="ConvertUtils"><a href="#ConvertUtils" class="headerlink" title="ConvertUtils"></a>ConvertUtils</h3><ul>
<li><code>void register(Converter con,Class&lt;?&gt; clazz)</code><ul>
<li>注册转换器</li>
<li>Beanutils默认支持8种基本类型，自动转换。</li>
<li>对于如日期需要先注册转换器。</li>
<li>使用<ul>
<li>在上述<code>BeanUtils</code>赋值前，调用一下。</li>
<li>可以使用内部类</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="发邮件"><a href="#发邮件" class="headerlink" title="发邮件"></a>发邮件</h1><ul>
<li><code>javaMail.jar</code></li>
<li>然后工具类指定一些配置即可。</li>
</ul>
<h1 id="JS-插件"><a href="#JS-插件" class="headerlink" title="JS 插件"></a>JS 插件</h1><h3 id="validate-js"><a href="#validate-js" class="headerlink" title="validate.js"></a>validate.js</h3><ul>
<li>校验插件</li>
<li><p>使用</p>
<ul>
<li><p><code>$(&quot;form表单&quot;).validate(json数据);</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#myForm&quot;).validate(&#123;</span><br><span class="line">	rules:&#123;</span><br><span class="line">		&quot;username&quot;:&#123;</span><br><span class="line">			&quot;required&quot;:true</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;password&quot;:&#123;</span><br><span class="line">			&quot;rerquired&quot;:true</span><br><span class="line">			&quot;rangelength&quot;:[6,12]</span><br><span class="line">		&#125;,	</span><br><span class="line">		......</span><br><span class="line">	&#125;,</span><br><span class="line">	messages:&#123;</span><br><span class="line">		&quot;username&quot;:&#123;</span><br><span class="line">			&quot;required&quot;:&quot;用户名不能为空&quot;,			</span><br><span class="line">		&#125;，</span><br><span class="line">		&quot;password&quot;:&#123;</span><br><span class="line">			&quot;rerquired&quot;:true</span><br><span class="line">			&quot;rangelength&quot;:&quot;密码长度6-12&quot;</span><br><span class="line">		&#125;,	</span><br><span class="line">		.......		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>一个规则，一个信息</p>
</li>
<li>可自定义规则</li>
</ul>
</li>
</ul>
<h1 id="第三方支付"><a href="#第三方支付" class="headerlink" title="第三方支付"></a>第三方支付</h1><h2 id="国付宝"><a href="#国付宝" class="headerlink" title="国付宝"></a>国付宝</h2><h2 id="连连支付"><a href="#连连支付" class="headerlink" title="连连支付"></a>连连支付</h2><ul>
<li>拍拍贷</li>
<li>陆金所</li>
<li>温商贷</li>
<li>玖富</li>
<li>360金融</li>
<li>点融 </li>
</ul>
<h2 id="易宝"><a href="#易宝" class="headerlink" title="易宝"></a>易宝</h2><h1 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h1><h2 id="邮箱客户端"><a href="#邮箱客户端" class="headerlink" title="邮箱客户端"></a>邮箱客户端</h2><ul>
<li>客户端<ul>
<li>foxmail</li>
<li>outlook</li>
</ul>
</li>
<li>网页</li>
</ul>
<h2 id="邮箱服务端"><a href="#邮箱服务端" class="headerlink" title="邮箱服务端"></a>邮箱服务端</h2><ul>
<li>邮件的接收和推送</li>
</ul>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><ul>
<li>接收<ul>
<li>POP3</li>
<li>IMAP</li>
</ul>
</li>
<li>发送<ul>
<li>SMTP</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/28/xd-上传和下载/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/xd-上传和下载/" itemprop="url">
                  xd-上传和下载
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-28 00:43:09 / 修改时间：01:28:45" itemprop="dateCreated datePublished" datetime="2018-12-28T00:43:09+08:00">2018-12-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h1><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><ol>
<li>提供form表单 method为post</li>
<li>enctype属性为<code>multipart/form-data</code></li>
<li>提供<code>&lt;input type=&quot;file&quot; name=&quot;mn&quot;&gt;</code>上传输入域</li>
</ol>
<h3 id="enctype"><a href="#enctype" class="headerlink" title="enctype"></a>enctype</h3><ul>
<li>告知服务器请求正文的MIME类型。（请求消息头：Content-Type作用是一致的）</li>
<li><p><code>application/x-www-form-urlencoded</code></p>
<ul>
<li>默认<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//请求信息</span><br><span class="line">//请求行</span><br><span class="line">//请求头</span><br><span class="line">...</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">...</span><br><span class="line">请求体</span><br><span class="line">name=an3&amp;mn(input中file的name)=文件名(mm.jpg)</span><br><span class="line">//服务器获取数据</span><br><span class="line">String name = request.getParameter(&quot;name&quot;)</span><br><span class="line">String name=request.getParameter(&quot;mm&quot;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>multipart/form-data</code></p>
<ul>
<li>上传用</li>
<li>使用<code>request.getParameter(key)</code>取不到表单数据</li>
<li><p>获取数据要使用流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//请求信息</span><br><span class="line">//请求行</span><br><span class="line">//请求头</span><br><span class="line">...</span><br><span class="line">Content-Type:multipart/form-data; boundar=======7df24c3430fa2</span><br><span class="line">//请求体</span><br><span class="line"> boundar=======7df24c3430fa2</span><br><span class="line">Content-Disposition: form-data; name=&quot;name&quot;</span><br><span class="line">an3</span><br><span class="line"> boundar=======7df24c3430fa2</span><br><span class="line">Content-Disposition: form-data; name=&quot;mn&quot;; filename=&quot;mm.jpg&quot;</span><br><span class="line">Contenet-Type: image/pjpeg</span><br><span class="line">图片的二进制数据</span><br><span class="line">//服务器获取数据</span><br><span class="line">//用字节流获取请求体的所有内容</span><br><span class="line">request.getInputStream()</span><br></pre></td></tr></table></figure>
</li>
<li><p>说明(安)</p>
<ul>
<li>可以看出enctype为<code>multipart/form-data</code>时<ul>
<li>请求体中包含了文件名，文件类型，文件具体内容。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="文件上传原理"><a href="#文件上传原理" class="headerlink" title="文件上传原理"></a>文件上传原理</h2><ul>
<li>解析请求体的每部分的内容</li>
</ul>
<h2 id="上传步骤-安"><a href="#上传步骤-安" class="headerlink" title="上传步骤(安)"></a>上传步骤(安)</h2><ul>
<li>获取上传的文件的输入流</li>
<li>确定服务器保存路径</li>
<li>确定服务器保存文件名</li>
<li>新建File对象(路径+文件名)</li>
<li>以新建的file对象创建输出流</li>
<li>然后读写操作。。</li>
</ul>
<h2 id="上传需要注意的问题-安"><a href="#上传需要注意的问题-安" class="headerlink" title="上传需要注意的问题(安)"></a>上传需要注意的问题(安)</h2><ul>
<li>文件路径<ul>
<li>存储在服务器端的路径</li>
</ul>
</li>
<li>文件名<ul>
<li>存储的文件名，避免重复</li>
<li>随机啊日期啊</li>
</ul>
</li>
</ul>
<h2 id="fileupload"><a href="#fileupload" class="headerlink" title="fileupload"></a>fileupload</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>第三方的上传组件用来解析上传文件，帮我们解析<code>request.getInputStream()</code></li>
</ul>
<h3 id="核心类"><a href="#核心类" class="headerlink" title="核心类"></a>核心类</h3><ul>
<li><code>DiskFileItemFactory</code></li>
<li><code>ServletFileUpload</code></li>
<li><code>FileItem</code></li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li><code>DiskFileItemFactory factory = new DiskFileItemFactory()</code><ul>
<li>创建工厂类DiskFileItemFactory对象</li>
<li>创建工厂时还可以指定缓存文件的大小和临时文件的位置</li>
<li>或者先创建，然后set也行<ul>
<li><code>factory.setSizeThreshold(字节)</code></li>
<li><code>factory.setRepository(new File(path))</code></li>
</ul>
</li>
</ul>
</li>
<li><code>ServletFileUpload fileUpload = new ServletFileUpload(factory)</code><ul>
<li>使用工厂创建解析器对象ServletFileUpload</li>
</ul>
</li>
<li><code>fileUpload.isMultipartContent(request)</code><ul>
<li>判断表单<code>enctype</code>是否是上传.</li>
</ul>
</li>
<li><code>List&lt;FileItem&gt; list = fileUpload.parseRequest(request)</code><ul>
<li>使用解析器来解析request对象</li>
</ul>
</li>
</ul>
<h4 id="FileItem"><a href="#FileItem" class="headerlink" title="FileItem"></a>FileItem</h4><ul>
<li>对应一个表单项（表单字段）。可以是文件字段或普通字段</li>
<li><code>boolean isFormField()</code><ul>
<li>判断当前表单字段是否为普通文本字段，如果返回false，说明是文件字段</li>
</ul>
</li>
<li><code>String getFieldName()</code><ul>
<li>获取字段名称</li>
</ul>
</li>
<li><code>String getString()</code><ul>
<li>获取字段的内容</li>
<li>如果是文件字段(必须是文本文件)，那么获取的是文件内容。</li>
<li>可以传入编码参数<ul>
<li><code>getString(&quot;utf-8&quot;)</code></li>
</ul>
</li>
</ul>
</li>
<li><code>String getName()</code><ul>
<li>获取文件字段的文件名称(如：mm.jpg)</li>
</ul>
</li>
<li><code>String getContentType()</code><ul>
<li>获取上传的文件的MIME类型，例如：text/plain。</li>
</ul>
</li>
<li><code>int getSize()</code><ul>
<li>获取上传文件的大小</li>
</ul>
</li>
<li><code>InputStream getInputStream()</code><ul>
<li>获取上传文件对应的输入流；</li>
</ul>
</li>
<li><code>void write(File)</code><ul>
<li>把上传的文件保存到指定文件中</li>
</ul>
</li>
<li><code>IOUtils.copey(in,out)</code><ul>
<li>工具类保存</li>
</ul>
</li>
<li><code>delete()</code><ul>
<li>清理临时文件</li>
</ul>
</li>
</ul>
<h3 id="上传要考虑的问题"><a href="#上传要考虑的问题" class="headerlink" title="上传要考虑的问题"></a>上传要考虑的问题</h3><ul>
<li>文件名问题<ul>
<li>上传的文件名是全路径，有的浏览器会自动处理，有的不会，最好处理一下。<ol>
<li>手动处理</li>
<li><code>FilenameUtils</code></li>
</ol>
</li>
</ul>
</li>
<li>保证服务器安全<ul>
<li>把保存上传文件的目录放在用户直接访问不到的地方(web-inf下)</li>
</ul>
</li>
<li>避免文件被覆盖<ul>
<li>文件名唯一</li>
</ul>
</li>
<li>避免同一个文件夹中的文件过多<ul>
<li>按照日期进行打散存储目录</li>
<li>用文件名的hashCode计算打散的存储目录：二级目录</li>
</ul>
</li>
<li>限制文件的大小：web方式不适合上传大的文件<ul>
<li>单个文件大小<ul>
<li><code>ServletFileUpload.setFileSizeMax(字节)</code></li>
</ul>
</li>
<li>总文件大小：（多文件上传）<ul>
<li><code>ServletFileUpload.setSizeMax(字节)</code></li>
</ul>
</li>
</ul>
</li>
<li>上传字段用户没有上传的问题<ul>
<li>通过判断文件名是否为空即可</li>
</ul>
</li>
<li>临时文件的问题<ul>
<li><code>DiskFileItemFactory</code><ul>
<li>内部有一个缓存，缓存大小默认是10Kb。如果上传的文件超过10Kb，用磁盘作为缓存。</li>
<li>存放缓存文件的目录默认是系统的临时目录。</li>
<li>可以自己设置缓存大小，和临时目录（见上边）</li>
</ul>
</li>
<li>上传后，会在临时目录产生一个临时文件。</li>
<li>如果自己用IO流实现的文件上传，要在流关闭后，清理临时文件。<ul>
<li><code>FileItem.delete();</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul>
<li><code>Content-disposition</code><ul>
<li>响应头，服务器告诉客户端以什么格式打开响应体数据</li>
<li><code>in-line</code><ul>
<li>默认值</li>
<li>在当前页面内打开</li>
</ul>
</li>
<li><code>attachment;filename=</code><ul>
<li>以附件形式打开响应体</li>
<li>文件下载</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol>
<li>设置响应头告诉浏览器是下载文件<ul>
<li><code>response.setHeader(&quot;content-disposition&quot;, &quot;attachment;filename=&quot;+fileName);</code></li>
</ul>
</li>
<li>设置响应头告诉浏览器下载的文件类型<ol>
<li><code>response.setHeader(&quot;content-type&quot;, &quot;image/jpeg&quot;);</code><ul>
<li>手动设置文件类型是图片</li>
</ul>
</li>
<li><code>response.setContentType(this.getServletContext().getMimeType(fileName))</code><ul>
<li>设置类型为根据文件名获取的类型</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li>根据请求参数获取文件名<ul>
<li><code>String filename = request.getParameter(String filename)</code></li>
</ul>
</li>
<li>根据文件名获取文件服务器路径<ul>
<li><code>String path=this.getServletContext.getRealPath(&quot;/filename&quot;);</code></li>
</ul>
</li>
<li>根据文件路径创建输入流</li>
<li>设置响应头<ol>
<li>下载文件</li>
<li>文件类型</li>
</ol>
</li>
<li>获取响应输出流，不断读写</li>
</ol>
<h3 id="下载文件名中文问题"><a href="#下载文件名中文问题" class="headerlink" title="下载文件名中文问题"></a>下载文件名中文问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// agent就是请求头User-Agent的值</span><br><span class="line">public class DownLoadUtils &#123;</span><br><span class="line">    public static String getFileName(String agent, String filename) throws UnsupportedEncodingException &#123;</span><br><span class="line">        if (agent.contains(&quot;MSIE&quot;)) &#123;</span><br><span class="line">            // IE浏览器</span><br><span class="line">            filename = URLEncoder.encode(filename, &quot;utf-8&quot;);</span><br><span class="line">            filename = filename.replace(&quot;+&quot;, &quot; &quot;);</span><br><span class="line">        &#125; else if (agent.contains(&quot;Firefox&quot;)) &#123;</span><br><span class="line">            // 火狐浏览器</span><br><span class="line">            BASE64Encoder base64Encoder = new BASE64Encoder();</span><br><span class="line">            filename = &quot;=?utf-8?B?&quot; + base64Encoder.encode(filename.getBytes(&quot;utf-8&quot;)) + &quot;?=&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 其它浏览器</span><br><span class="line">            filename = URLEncoder.encode(filename, &quot;utf-8&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return filename;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/25/xd-WEB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/25/xd-WEB/" itemprop="url">
                  xd-WEB
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-25 22:57:57" itemprop="dateCreated datePublished" datetime="2018-12-25T22:57:57+08:00">2018-12-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-27 21:17:06" itemprop="dateModified" datetime="2018-12-27T21:17:06+08:00">2018-12-27</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Web容器"><a href="#Web容器" class="headerlink" title="Web容器"></a>Web容器</h1><ul>
<li>所有的程序运行都需要有一个必要的运行环境。这个环境可以是软件，也可以是硬件，或者是软件和硬件的结合。比如说Windows操作系统需要运行在硬件基础上；Office软件需要运行在操作系统上。并且程序与运行环境之间会有一定的数据交换，比如操作系统会将运行指令传递给硬件，硬件也会将指令运行结果传递给操作系统</li>
<li>Java Web程序也需要一个运行环境才能够执行。这种运行Java Web程序的环境被称为Web容器，Java Web程序与Web容器之间存在数据交互。</li>
</ul>
<h2 id="独立的Java-Web容器"><a href="#独立的Java-Web容器" class="headerlink" title="独立的Java Web容器"></a>独立的Java Web容器</h2><ul>
<li>在这种容器里面只能运行Web程序，这种容器一般也叫做Web服务器，如Tomcat</li>
</ul>
<h2 id="与其他Java-EE容器混合在一起的Web容器"><a href="#与其他Java-EE容器混合在一起的Web容器" class="headerlink" title="与其他Java EE容器混合在一起的Web容器"></a>与其他Java EE容器混合在一起的Web容器</h2><ul>
<li>Web容器负责运行Web程序，其他容器负责运行EJB等程序，如WebLogic</li>
</ul>
<h2 id="web容器与web应用间的数据交互"><a href="#web容器与web应用间的数据交互" class="headerlink" title="web容器与web应用间的数据交互"></a>web容器与web应用间的数据交互</h2><ul>
<li>web容器接收客户端请求封装<strong>HttpServletRequest</strong>对象，并传递给web应用</li>
<li>web应用处理请求</li>
<li>web容器将结果封装到<strong>HttpServletResponse</strong>对象，响应给客户端</li>
<li>注<ul>
<li>这两个对象仅存在于Web容器和Web应用当中，与浏览器没有关系</li>
</ul>
</li>
</ul>
<h2 id="tomcat和servlet的区别"><a href="#tomcat和servlet的区别" class="headerlink" title="tomcat和servlet的区别"></a>tomcat和servlet的区别</h2><ul>
<li>Tomcat 是Web应用服务器,是一个Servlet/JSP容器</li>
<li>servlet是一种运行在服务器端的Java应用程序</li>
</ul>
<h2 id="web应用服务器"><a href="#web应用服务器" class="headerlink" title="web应用服务器"></a>web应用服务器</h2><ul>
<li><code>tomcat</code><ul>
<li>支持servlet/jsp规范</li>
</ul>
</li>
<li><code>weblogic</code><ul>
<li>支持全部j2ee规范</li>
</ul>
</li>
<li><code>websphere</code><ul>
<li>支持全部j2ee规范</li>
</ul>
</li>
<li><code>jboss</code></li>
</ul>
<h1 id="标准JavaWeb应用目录结构"><a href="#标准JavaWeb应用目录结构" class="headerlink" title="标准JavaWeb应用目录结构"></a>标准JavaWeb应用目录结构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MyApp  				//项目名</span><br><span class="line">	html,css,js,img... //资源文件</span><br><span class="line">	WEB-INF</span><br><span class="line">		classes	    //.class文件，配置文件</span><br><span class="line">		lib			// jar包</span><br><span class="line">		web.xml		//web配置文件</span><br></pre></td></tr></table></figure>
<ul>
<li>说明<ul>
<li>ide中的src目录<ul>
<li>编译后会存在web-inf下的classes中。</li>
</ul>
</li>
<li>以下三个目录中的文件会直接存在应用下，与web-inf同级，相当于资源文件<ul>
<li>eclipse中的WebContent目录</li>
<li>Myeclipse中的WebRoot目录</li>
<li>intellij中的web目录</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><ul>
<li>Tomcat启动时，需要查找<code>CATALINA_HOME</code>这个环境变量<ul>
<li>判断<code>CATALINA_HOME</code>环境变量是否为空<ul>
<li>为空<ul>
<li>就将当前目录设为CATALINA_HOME的值，接着判断当前目录下是否存在<code>bin\catalina.bat</code>，如果文件不存在，将当前目录的父目录设为<code>CATALINA_HOM</code>E的值，循环，最后如果找不到<code>bin\catalina.bat</code>就报错。</li>
</ul>
</li>
<li>不为空<ul>
<li>通过这个环境变量调用<code>bin\catalina.bat</code>命令</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>执行<code>startup.bat</code>命令，会自动去执行<code>catalina.bat start</code>命令</li>
</ul>
<p>##<code>CATALINA_HOME</code>和<code>CATALINA_BASE</code>区别</p>
<h3 id="CATALINA-HOME"><a href="#CATALINA-HOME" class="headerlink" title="CATALINA_HOME"></a>CATALINA_HOME</h3><ul>
<li>是Tomcat的安装目录</li>
<li>类似于<code>JAVA_HOME</code>环境变量</li>
<li>如果配置了就能在任意路径执行bin目录下的bat或者exe</li>
<li>通常不配置</li>
</ul>
<h3 id="CATALINA-BASE"><a href="#CATALINA-BASE" class="headerlink" title="CATALINA_BASE"></a>CATALINA_BASE</h3><ul>
<li>是Tomcat的工作目录</li>
<li>如果CATALINA_BASE没有值的话，它默认的值就是CATALINA_HOME</li>
</ul>
<h3 id="tomcat目录"><a href="#tomcat目录" class="headerlink" title="tomcat目录"></a>tomcat目录</h3><ul>
<li>其中只有 bin 和 lib 目录被多个tomcat示例公用</li>
<li>其它目录conf、logs、temp、webapps和work 每个Tomcat实例必须拥有其自己独立的备份</li>
<li>catalina.home(安装目录)：<ul>
<li>指向公用信息的位置，就是bin和lib的父目录</li>
</ul>
</li>
<li>catalina.base(工作目录)：<ul>
<li>指向每个Tomcat目录私有信息的位置，就是conf、logs、temp、webapps和work的父目录。</li>
</ul>
</li>
<li>仅运行一个Tomcat实例时，这两个属性指向的位置是相同的</li>
</ul>
<h3 id="网上自建startup-bat的内容"><a href="#网上自建startup-bat的内容" class="headerlink" title="网上自建startup.bat的内容"></a>网上自建<code>startup.bat</code>的内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set &quot;CATALINA_BASE=%cd%&quot;  </span><br><span class="line">set &quot;CATALINA_HOME=D:/save/apache-tomcat-8.0.48&quot;  </span><br><span class="line">set &quot;EXECUTABLE=%CATALINA_HOME%\bin\catalina.bat&quot;  </span><br><span class="line">call &quot;%EXECUTABLE%&quot; start</span><br></pre></td></tr></table></figure>
<ul>
<li><code>%cd%</code><ul>
<li>代表当前目录（不太确定）</li>
</ul>
</li>
<li><code>CATALINA_BASE</code>就代表一个tomcat的运行实例<ul>
<li>包含<code>conf</code>,logs,temp,webapps,work`的目录。</li>
</ul>
</li>
<li><code>CATALINA_HOME</code>代表了一个tomcat，需要tomcat的<code>bin,lib...</code></li>
<li>启动tomcat后，<code>CATALINA_BASE</code>指向哪个tomcat实例，就运行哪个。<ul>
<li>比如我有一个tomcat8080，然后再另一个文件夹复制了一个<code>conf</code>并设置端口号为7070</li>
<li><code>CATALINA_HOME</code>为tomcat8080安装目录，设置<code>CATALINA_BASE</code>为7070对应的目录，那么能访问的是7070而非8080,</li>
<li><strong>虚拟目录</strong>貌似就是这个原理。</li>
</ul>
</li>
</ul>
<h2 id="tomcat部署应用"><a href="#tomcat部署应用" class="headerlink" title="tomcat部署应用"></a>tomcat部署应用</h2><h3 id="部署形式"><a href="#部署形式" class="headerlink" title="部署形式"></a>部署形式</h3><ol>
<li>项目文件夹</li>
<li>war包<ul>
<li>tomcat会自动判断war包并解压。</li>
</ul>
</li>
</ol>
<h3 id="部署方式"><a href="#部署方式" class="headerlink" title="部署方式"></a>部署方式</h3><h4 id="一-将项目复制到tomcat-webapps目录下。"><a href="#一-将项目复制到tomcat-webapps目录下。" class="headerlink" title="一 将项目复制到tomcat/webapps目录下。"></a>一 将项目复制到<code>tomcat/webapps</code>目录下。</h4><ul>
<li>Myeclipse就是这种方式。</li>
</ul>
<h4 id="二-虚拟目录"><a href="#二-虚拟目录" class="headerlink" title="二 虚拟目录"></a>二 虚拟目录</h4><ul>
<li>就是把项目放到其它位置通过一些配置也能一样访问。(安)</li>
</ul>
<h5 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h5><ul>
<li><p><code>tomcat/conf/server.xml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host&gt;</span><br><span class="line">	&lt;Context docBase=&quot;应用的真实路径&quot; path=&quot;网络访问的虚拟目录名(自定义)&quot; /&gt;</span><br><span class="line">&lt;/Host&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Eclipse使用这种方式</p>
<ul>
<li><code>Catalina_Base</code><ul>
<li><code>workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps</code></li>
</ul>
</li>
</ul>
</li>
<li>不推荐，修改需要重启tomcat</li>
</ul>
<h4 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h4><ul>
<li><p><code>tomcat/conf/catalina/localhost</code></p>
<ul>
<li>新建<code>虚拟目录名(自定义).xml</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context docBase=&quot;应用的真实路径&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Intellij使用这种方式</p>
<ul>
<li><code>Catalina_Base</code><ul>
<li><code>Intellij/system/tomcat/</code></li>
</ul>
</li>
</ul>
</li>
<li>支持热部署，修改不用重启tomcat</li>
<li>如果新建的<code>虚拟目录名</code>为<code>ROOT</code>，则访问时，可以不写<ul>
<li>Intellij就是这样做的</li>
</ul>
</li>
</ul>
<h2 id="tomcat的访问"><a href="#tomcat的访问" class="headerlink" title="tomcat的访问"></a>tomcat的访问</h2><ul>
<li><code>http://ip:端口/应用/资源</code></li>
</ul>
<h3 id="默认端口"><a href="#默认端口" class="headerlink" title="默认端口"></a>默认端口</h3><ul>
<li>http协议端口为80</li>
<li>把tomcat端口设为80就不用写端口了</li>
</ul>
<h3 id="默认应用"><a href="#默认应用" class="headerlink" title="默认应用"></a>默认应用</h3><ul>
<li>tomcat默认访问ROOT应用<br>  *（见上边虚拟目录）</li>
</ul>
<h3 id="默认主页"><a href="#默认主页" class="headerlink" title="默认主页"></a>默认主页</h3><ul>
<li><code>web.xml</code>中配置</li>
</ul>
<h2 id="idea中tomcat的部署"><a href="#idea中tomcat的部署" class="headerlink" title="idea中tomcat的部署"></a>idea中tomcat的部署</h2><h3 id="war"><a href="#war" class="headerlink" title="war"></a><code>war</code></h3><ul>
<li>将web工程以war包的形式上传到服务器</li>
<li>可以称之为是发布模式，看名字也知道，这是先打包war包，再发布</li>
<li><code>request.getServletContext().getRealPath(&quot;/&quot;)</code><ul>
<li><code>D:\save\apache-tomcat-8.0.48\webapps\ROOT\</code></li>
<li>结果是tomcat的webapps的Root目录</li>
<li>会把Root目录项目替换成此项目<ul>
<li>此种情况是配置tomcat时application context选择了<code>/</code></li>
<li>如果配置成别的如<code>/aaa</code><ul>
<li>则不会替换Root，而是在webapps下创建aaa</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="war-exploed"><a href="#war-exploed" class="headerlink" title="war exploed"></a><code>war exploed</code></h3><ul>
<li>将web工程以当前文件夹的位置关系上传到服务器</li>
<li>展开部署(相当于将资源文件进行展开后进行部署)</li>
<li>直接把文件夹，jsp页面，classes等等移到Tomcat部署文件夹里面，进行加载部署。因此这种方式支持热部署，一般在开发的时候也是用这种方式。</li>
<li><code>request.getServletContext().getRealPath(&quot;/&quot;)</code><ul>
<li><code>D:\save\IntellijWP\project\HelloMaven\target\HelloMaven-1.0-SNAPSHOT\</code></li>
<li>可以看到是项目target下的目录</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/25/xd-BootStrap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/25/xd-BootStrap/" itemprop="url">
                  xd-BootStrap
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-25 13:38:34 / 修改时间：13:38:35" itemprop="dateCreated datePublished" datetime="2018-12-25T13:38:34+08:00">2018-12-25</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/20/xd-事务和连接池/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/20/xd-事务和连接池/" itemprop="url">
                  xd-事务和连接池
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-20 13:06:35" itemprop="dateCreated datePublished" datetime="2018-12-20T13:06:35+08:00">2018-12-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-24 14:45:19" itemprop="dateModified" datetime="2018-12-24T14:45:19+08:00">2018-12-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DB/" itemprop="url" rel="index"><span itemprop="name">DB</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ACID特性"><a href="#ACID特性" class="headerlink" title="ACID特性"></a>ACID特性</h1><h2 id="原子性（atomicity）"><a href="#原子性（atomicity）" class="headerlink" title="原子性（atomicity）"></a>原子性（atomicity）</h2><ul>
<li>一个事务是一个不可分割的工作单位，事务中包括的诸操作要么都做，要么都不做。</li>
</ul>
<h2 id="一致性（consistency）"><a href="#一致性（consistency）" class="headerlink" title="一致性（consistency）"></a>一致性（consistency）</h2><ul>
<li>事务必须是使数据库从一个一致性状态变到另一个一致性状态。即事务操作的前后, 数据表中的数据没有变化</li>
<li>一致性与原子性是密切相关的。</li>
</ul>
<h2 id="隔离性（isolation）"><a href="#隔离性（isolation）" class="headerlink" title="隔离性（isolation）"></a>隔离性（isolation）</h2><ul>
<li>一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</li>
</ul>
<h2 id="持久性（durability）"><a href="#持久性（durability）" class="headerlink" title="持久性（durability）"></a>持久性（durability）</h2><ul>
<li>持久性也称永久性（permanence），指一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。接下来的其他操作或故障不应该对其有任何影响。</li>
</ul>
<h1 id="事务原理"><a href="#事务原理" class="headerlink" title="事务原理"></a>事务原理</h1><ul>
<li>事务开启之后, 所有的操作都会临时保存到事务日志, 事务日志只有在得到commit命令才会同步到数据表,其他任何情况都会清空(rollback, 断电, 断开连接)</li>
</ul>
<h1 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h3><ul>
<li>在一个事务处理过程里读取了另一个事务未提交的数据。</li>
<li><strong>例</strong><ul>
<li>我开启查看工资的事务,老板给我发工资，本来是1万，老板不小心多打了个0，发了10万，但老板没提交事务，我看到发了10万，高兴坏了，然后老板发现后回滚了。</li>
<li>最后实际还是发了1万工资，可我确看到10万，这就是脏读。</li>
</ul>
</li>
</ul>
<h3 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h3><ul>
<li>在一个事务内读取表中的某一行数据，多次读取结果不同。一个事务读取到了另一个事务提交后的数据。(update)</li>
<li><strong>例</strong><ul>
<li>我开启事务查看卡里有多少钱，发现还有1万，还个事务没提交，这时我媳妇用我的卡转了1万并提交了。然后我想确认一下，又查了一遍，发现没钱了，我就懵逼了。</li>
<li>在一个事务中，有另一个事务进行了update操作并提交，导致两次读取数据不一致，就是不可重复读.</li>
</ul>
</li>
</ul>
<h3 id="虚读-幻读"><a href="#虚读-幻读" class="headerlink" title="虚读(幻读)"></a>虚读(幻读)</h3><ul>
<li>是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。(insert)</li>
<li><strong>例</strong><ul>
<li>我开启事务查询班里多少人，发现有24个人，还没提交，然后老师又插入了一个人，我确认一下，又查了一遍，发现25个人了，我又懵逼了。</li>
<li>在一个事务中，有另一个事务进行了insert操作并提交，导致两次读取数据不一致，就是虚读(幻读).</li>
</ul>
</li>
</ul>
<h3 id="总"><a href="#总" class="headerlink" title="总"></a>总</h3><ul>
<li>读了未提交的事务的数据即<strong>脏读</strong></li>
<li>读了已提交的事务的数据(update)即<strong>不可重复读</strong></li>
<li>读了已提交的事务的数据(insert)即<strong>虚读(幻读)</strong></li>
</ul>
<h2 id="隔离级别解决问题"><a href="#隔离级别解决问题" class="headerlink" title="隔离级别解决问题"></a>隔离级别解决问题</h2><ul>
<li>设置隔离级别要在开启事务之前。</li>
</ul>
<h3 id="1-READ-UNCOMMITTED"><a href="#1-READ-UNCOMMITTED" class="headerlink" title="1 READ UNCOMMITTED"></a><code>1 READ UNCOMMITTED</code></h3><ul>
<li>读未提交<ul>
<li>就是一个事务可以读取另一个未提交事务的数据</li>
</ul>
</li>
<li>脏读，不可重复读，虚读（幻读）都可能发生</li>
</ul>
<h3 id="2-READ-COMMITTED"><a href="#2-READ-COMMITTED" class="headerlink" title="2 READ COMMITTED"></a><code>2 READ COMMITTED</code></h3><ul>
<li>读已提交<ul>
<li>就是一个事务要等另一个事务提交后才能读取数据</li>
</ul>
</li>
<li>可避免脏读的发生</li>
<li>不可重复度，虚读(幻读)有可能发生.</li>
<li>Sql Server,oracle默认</li>
</ul>
<h3 id="4-REPEATABLE-READ"><a href="#4-REPEATABLE-READ" class="headerlink" title="4 REPEATABLE READ"></a><code>4 REPEATABLE READ</code></h3><ul>
<li>可重复读<ul>
<li>开始读取数据(事务开启)时，不允许别的事务进行update操作,但可以进行inser操作。</li>
</ul>
</li>
<li>可避免脏读、不可重复读的发生</li>
<li>虚读(幻读)有可能发生</li>
<li>mysql默认</li>
</ul>
<h3 id="8-SERIALIZABLE"><a href="#8-SERIALIZABLE" class="headerlink" title="8 SERIALIZABLE"></a><code>8 SERIALIZABLE</code></h3><ul>
<li>串行化</li>
<li>最高级别，都可以避免。</li>
<li>级别越高，性能越低，数据越安全</li>
</ul>
<h1 id="jdbc的事务"><a href="#jdbc的事务" class="headerlink" title="jdbc的事务"></a>jdbc的事务</h1><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><ul>
<li>自动提交事务（默认）<ul>
<li>每条单独的语句都是一个事务。每个语句后都隐含一个commit。 </li>
</ul>
</li>
<li><code>Connection.setAutoCommit(false)</code><ul>
<li>将自动提交设置为false即视为开启事务。</li>
</ul>
</li>
<li><code>Connection.commit()</code></li>
<li><code>Connection.rollback()</code></li>
</ul>
<h2 id="隔离级别-1"><a href="#隔离级别-1" class="headerlink" title="隔离级别"></a>隔离级别</h2><ul>
<li><code>Connection.setTransactionIsolation(int level)</code><ul>
<li>设置隔离级别(必须在开启事务之前)<ul>
<li>level 常量</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="mysql的事务"><a href="#mysql的事务" class="headerlink" title="mysql的事务"></a>mysql的事务</h1><h2 id="事务-1"><a href="#事务-1" class="headerlink" title="事务"></a>事务</h2><ul>
<li>在mysql命令行下，默认事务都是自动提交的<ul>
<li><code>set autocommit=0/off</code><ul>
<li>关闭自动提交</li>
</ul>
</li>
</ul>
</li>
<li><code>begin</code> | <code>start transction</code> | <code>set autocommit=0/off</code><ul>
<li>开启事务</li>
</ul>
</li>
<li><code>commit</code></li>
<li><code>rollback</code></li>
</ul>
<h2 id="隔离级别-2"><a href="#隔离级别-2" class="headerlink" title="隔离级别"></a>隔离级别</h2><ul>
<li><code>SELECT @@TX_ISOLATION;</code><ul>
<li>查看隔离级别</li>
</ul>
</li>
<li><code>SET TRANSACTION ISOLATION LEVEL 四个级别之一</code><ul>
<li>设置隔离级别</li>
<li>必须在开启事务之前</li>
</ul>
</li>
</ul>
<h1 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h1><h2 id="释义"><a href="#释义" class="headerlink" title="释义"></a>释义</h2><ul>
<li>数据库连接池负责分配、管理和释放数据库连接，它允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个；释放空闲时间超过最大空闲时间的数据库连接来避免因为没有释放数据库连接而引起的数据库连接遗漏。这项技术能明显提高对数据库操作的性能。</li>
</ul>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><ul>
<li>解决建立数据库连接耗费资源和时间很多的问题，提高性能</li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul>
<li>连接池基本的思想是在系统初始化的时候，将数据库连接作为对象存储在内存中，当用户需要访问数据库时，并非建立一个新的连接，而是从连接池中取出一个已建立的空闲连接对象。使用完毕后，用户也并非将连接关闭，而是将连接放回连接池中，以供下一个请求访问使用。而连接的建立、断开都由连接池自身来管理。同时，还可以通过设置连接池的参数来控制连接池中的初始连接数、连接的上下限数以及每个连接的最大使用次数、最大空闲时间等等。也可以通过其自身的管理机制来监视数据库连接的数量、使用情况等。</li>
</ul>
<h2 id="javax-sql-DataSorce"><a href="#javax-sql-DataSorce" class="headerlink" title="javax.sql.DataSorce"></a><code>javax.sql.DataSorce</code></h2><ul>
<li>sun官方标准的连接池接口</li>
<li>自定义连接池实现此接口，数据库厂商自己实现。</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li><code>Connection getConnection()</code></li>
<li><code>Connection getConnection(String username, String password)</code></li>
</ul>
<h2 id="常用连接池"><a href="#常用连接池" class="headerlink" title="常用连接池"></a>常用连接池</h2><h3 id="DBCP"><a href="#DBCP" class="headerlink" title="DBCP"></a>DBCP</h3><ul>
<li><code>Database Connection Pool</code></li>
</ul>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><ul>
<li>导包</li>
<li>配置文件</li>
<li>获取数据源<ul>
<li><code>BasicDataSourceFactory</code><ul>
<li><code>static DataSource createDataSource(properties prop)</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Properties prop = new Properties();</span><br><span class="line">prop.load(DBCPUtils.class.getClassLoader().getResourceAsStream(&quot;dbcp.properties&quot;));</span><br><span class="line">DataSource ds = BasicDataSourceFactory.createDataSource(prop);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="C3P0"><a href="#C3P0" class="headerlink" title="C3P0"></a>C3P0</h3><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><ul>
<li>导包</li>
<li>配置文件<ul>
<li><code>c3p0-config.xml</code></li>
<li>名称必须为c3p0-config.xml，否则找不到</li>
</ul>
</li>
<li>获取数据源<ul>
<li><code>ComboPooledDataSource</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ComboPooledDataSource ds=new ComboPooledDataSource();</span><br><span class="line">ds.setDriver()</span><br><span class="line">ds.setJdbcUrl()</span><br><span class="line">ds.setUser()</span><br><span class="line">ds.setPassword;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="Druid"><a href="#Druid" class="headerlink" title="Druid"></a>Druid</h3><ul>
<li><code>com.alibaba.druid.pool.DruidDataSource</code></li>
<li>阿里巴巴开源平台上一个数据库连接池实现，它结合了C3P0、DBCP、PROXOOL等DB池的优点，同时加入了日志监控，可以很好的监控DB池连接和SQL的执行情况，可以说是针对监控而生的DB连接池(据说是目前最好的连接池）</li>
</ul>
<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><ul>
<li>导包</li>
<li>配置文件<ul>
<li>任意位置，任意名称<code>.properties</code></li>
</ul>
</li>
<li>获取数据源<ul>
<li><code>DruidDataSourceFactory</code><ul>
<li><code>DataSource createDataSource(Properties prop)</code> </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="用JavaWeb服务器管理数据源"><a href="#用JavaWeb服务器管理数据源" class="headerlink" title="用JavaWeb服务器管理数据源"></a>用JavaWeb服务器管理数据源</h2><h3 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ol>
<li>拷贝数据库连接的jar(mysql-Connector)到tomcat的lib目录下</li>
<li><p>配置数据源XML文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context&gt;</span><br><span class="line">	&lt;Resource name=&quot;jdbc/TestDB&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;</span><br><span class="line">           maxTotal=&quot;100&quot; maxIdle=&quot;30&quot; maxWaitMillis=&quot;10000&quot;</span><br><span class="line">           username=&quot;root&quot; password=&quot;root&quot; driverClassName=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">           url=&quot;jdbc:mysql://localhost:3306/javatest&quot;/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果是在当前应用的META-INF中创建<code>context.xml</code>, 编写配置信息，那么只有当前应用可以使用。</li>
<li>如果把配置信息写在tomcat下的conf目录的<code>context.xml</code>中，那么所有应用都能使用此数据源。<ul>
<li>可以多个Resource如mysql，Oracle，sqlserver…</li>
<li>多个就构成了<strong>JNDI</strong>(安)</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Context initContext = new InitialContext();</span><br><span class="line"></span><br><span class="line">//Context envContext  = (Context)initContext.lookup(&quot;java:/comp/env&quot;);</span><br><span class="line">//DataSource ds = (DataSource)envContext.lookup(&quot;jdbc/TestDB&quot;);</span><br><span class="line"></span><br><span class="line">//上面两句可以合写成下面这一句</span><br><span class="line">DataSource ds = (DataSource)=initContext.lookup(&quot;java:/comp/env/jdbc/TestDB&quot;);</span><br><span class="line">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>
<ul>
<li><code>java:/comp/env</code><ul>
<li>是固定写法</li>
</ul>
</li>
<li><code>jdbc/TestDB</code><ul>
<li>是Resource的name，自定义。</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/11/xd-MyBatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/11/xd-MyBatis/" itemprop="url">
                  xd-MyBatis
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-11 00:40:45" itemprop="dateCreated datePublished" datetime="2018-12-11T00:40:45+08:00">2018-12-11</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/11/xd-SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/11/xd-SpringMVC/" itemprop="url">
                  xd-SpringMVC
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-11 00:40:23" itemprop="dateCreated datePublished" datetime="2018-12-11T00:40:23+08:00">2018-12-11</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/11/xd-Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/11/xd-Spring/" itemprop="url">
                  xd-Spring
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-11 00:40:07" itemprop="dateCreated datePublished" datetime="2018-12-11T00:40:07+08:00">2018-12-11</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/11/xd-Hibernate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/11/xd-Hibernate/" itemprop="url">
                  xd-Hibernate
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-11 00:39:59" itemprop="dateCreated datePublished" datetime="2018-12-11T00:39:59+08:00">2018-12-11</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://github.com/awcnoanswer/myPicture/raw/master/headPic/swk.png"
                alt="安₃" />
            
              <p class="site-author-name" itemprop="name">安₃</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">48</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-snowflake-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安₃</span>

  

  
</div>



<!--





-->





        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  


<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
